"use strict";function _createForOfIteratorHelper(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,t=function(){};return{s:t,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw a}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var slideInterval,toggleButton=document.getElementsByClassName("toggle-button")[0],navbarLinks=document.getElementsByClassName("navbar-links")[0],footerYear=document.querySelector(".footer-year"),slides=document.querySelectorAll(".slide"),next=document.querySelector("#next"),prev=document.querySelector("#prev"),auto=!0,intervalTime=7e3;toggleButton.addEventListener("click",function(){navbarLinks.classList.toggle("active")});var handleCurrentYear=function(){var e=(new Date).getFullYear();footerYear.innerText=e};handleCurrentYear();var nextSlide=function(){var e=document.querySelector(".current");e.classList.remove("current"),(e.nextElementSibling||slides[0]).classList.add("current"),setTimeout(function(){return e.classList.remove("current")})},prevSlide=function(){var e=document.querySelector(".current");e.classList.remove("current"),(e.previousElementSibling||slides[slides.length-1]).classList.add("current"),setTimeout(function(){return e.classList.remove("current")})};next.addEventListener("click",function(e){nextSlide(),auto&&(clearInterval(slideInterval),slideInterval=setInterval(nextSlide,intervalTime))}),prev.addEventListener("click",function(e){prevSlide(),auto&&(clearInterval(slideInterval),slideInterval=setInterval(nextSlide,intervalTime))}),auto&&(slideInterval=setInterval(nextSlide,intervalTime));var colc=new Colcade(".grid",{columns:".grid-col",items:".grid-item"});!function(){function i(e){null!==(e=e.nextElementSibling)&&e.classList.contains("form-error-text")&&e.remove()}function l(e,t){null!==(e=e.nextElementSibling)&&e.classList.contains("form-error-text")&&(e.style.display=t?"block":"none",e.setAttribute("aria-hidden",t))}function s(e,t){t?e.classList.add("field-error"):(e.classList.remove("field-error"),l(e,!1))}var c=document.querySelector("#contactForm"),u=c.querySelectorAll("[required]");c.setAttribute("novalidate",!0);var e,t=_createForOfIteratorHelper(u);try{for(t.s();!(e=t.n()).done;)e.value.addEventListener("input",function(e){return s(e.target,!e.target.checkValidity())})}catch(e){t.e(e)}finally{t.f()}c.addEventListener("submit",function(e){e.preventDefault();var t=_createForOfIteratorHelper(u);try{for(t.s();!(r=t.n()).done;){var r=r.value;i(r),r.classList.remove("field-error"),r.checkValidity()||(function(e,t){i(e);var r=document.createElement("div");r.classList.add("form-error-text"),r.innerText=t,null===e.nextElementSibling?e.parentElement.appendChild(r):e.nextElementSibling.classList.contains("form-error-text")||e.parentElement.insertBefore(r,e.nextElementSibling)}(r,r.dataset.errorText),r.classList.add("field-error"),formHasErrors=!0)}}catch(e){t.e(e)}finally{t.f()}var a=c.querySelector("[type=submit]");a.disabled=!0,a.classList.add("loading");var n=new FormData(c),o=c.getAttribute("action"),e=c.getAttribute("method");fetch(o,{method:e.toUpperCase(),body:n}).then(function(e){return e.json()}).then(function(e){if(e.errors){var t=e.errors.map(function(e){return'[name="'.concat(e,'"]')}),r=_createForOfIteratorHelper(c.querySelectorAll(t.join(",")));try{for(r.s();!(n=r.n()).done;){var n=n.value;s(n,!0),l(n,!0)}}catch(e){r.e(e)}finally{r.f()}}else"ok"===e.status&&((t=document.createElement("div")).classList.add("form-send-success"),t.innerText="Wysłanie wiadomości się nie powiodło",c.parentElement.insertBefore(t,c),t.innerHTML="\n                          <strong>Wiadomość została wysłana</strong>\n                          <span>Dziękujemy za kontakt. Postaramy się odpowiedzieć jak najszybciej</span>\n                      ",c.remove()),"error"===e.status&&((e=document.querySelector(".form-send-error"))&&e.remove(),(e=document.createElement("div")).classList.add("form-send-error"),e.innerText="Wysłanie wiadomości się nie powiodło",a.parentElement.appendChild(e))}).finally(function(){a.disabled=!1,a.classList.remove("loading")})})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJuZXh0IiwidG9nZ2xlQnV0dG9uIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwibmF2YmFyTGlua3MiLCJmb290ZXJZZWFyIiwicXVlcnlTZWxlY3RvciIsInNsaWRlcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnRlcnZhbFRpbWUiLCJzbGlkZUludGVydmFsIiwidG9nZ2xlIiwiaGFuZGxlQ3VycmVudFllYXIiLCJnZXRGdWxsWWVhciIsImlubmVyVGV4dCIsIm5leHRTbGlkZSIsImN1cnJlbnQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJhZGQiLCJzZXRUaW1lb3V0IiwicHJldlNsaWRlIiwicHJldmlvdXNFbGVtZW50U2libGluZyIsImUiLCJhdXRvIiwiY2xlYXJJbnRlcnZhbCIsInNldEludGVydmFsIiwicHJldiIsImFkZEV2ZW50TGlzdGVuZXIiLCJDb2xjYWRlIiwiY29sdW1ucyIsInJlbW92ZUZpZWxkRXJyb3IiLCJmaWVsZCIsImVycm9yVGV4dCIsImNyZWF0ZUZpZWxkRXJyb3IiLCJjb250YWlucyIsImRpc3BsYXkiLCJzaG93Iiwic2V0QXR0cmlidXRlIiwic3R5bGUiLCJ0b2dnbGVFcnJvckZpZWxkIiwiZm9ybSIsImlucHV0cyIsIl9zdGVwIiwiX2l0ZXJhdG9yIiwiX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiLCJzIiwibiIsImRvbmUiLCJ2YWx1ZSIsIm1hcmtGaWVsZEFzRXJyb3IiLCJ0YXJnZXQiLCJjaGVja1ZhbGlkaXR5IiwiZXJyIiwiZiIsImVsIiwiX2l0ZXJhdG9yMiIsIl9zdGVwMiIsInRleHQiLCJkaXYiLCJjcmVhdGVFbGVtZW50IiwicGFyZW50RWxlbWVudCIsImFwcGVuZENoaWxkIiwiaW5zZXJ0QmVmb3JlIiwiZGF0YXNldCIsInByZXZlbnREZWZhdWx0IiwiZm9ybUhhc0Vycm9ycyIsInN1Ym1pdCIsImRpc2FibGVkIiwiZm9ybURhdGEiLCJ1cmwiLCJnZXRBdHRyaWJ1dGUiLCJtZXRob2QiLCJib2R5IiwidGhlbiIsInJlcyIsImpzb24iLCJlcnJvcnMiLCJzZWxlY3RvcnMiLCJtYXAiLCJjb25jYXQiLCJfaXRlcmF0b3IzIiwiam9pbiIsIl9zdGVwMyIsImZvcm1FcnJvcnMiLCJGb3JtRGF0YSIsInN0YXR1cyIsImlubmVySFRNTCIsInN0YXR1c0Vycm9yIl0sIm1hcHBpbmdzIjoiaXBDQUVBLElBS01BLGNBTEFDLGFBQWVDLFNBQVNDLHVCQUF1QixpQkFBaUIsR0FDaEVDLFlBQWNGLFNBQVNDLHVCQUF1QixnQkFBZ0IsR0FDOURFLFdBQWFILFNBQVNJLGNBQWMsZ0JBRXBDQyxPQUFTTCxTQUFTTSxpQkFBaUIsVUFDbkNSLEtBQU9FLFNBQVNJLGNBQWMsU0FMOUJMLEtBQUFBLFNBQWVDLGNBQVNDLFNBQ3hCQyxNQUFBQSxFQUNBQyxhQUFhSCxJQU1uQkQsYUFBTVEsaUJBQU4sUUFBQSxXQUVBTCxZQUFJTSxVQUFKQyxPQUFBLFlBU0EsSUFBTUMsa0JBQW9CLFdBQTFCLElBQU1BLEdBQUFBLElBQUFBLE1BQW9CQyxjQUN4QlIsV0FBY1MsVUFBVUQsR0FJMUJELG9CQUdBLElBQU1HLFVBQVksV0FFaEIsSUFBTUMsRUFBVWQsU0FBU0ksY0FBYyxZQUV2Q1UsRUFBUUMsVUFBVUMsT0FBTyxZQUVyQkYsRUFBUUcsb0JBS1ZaLE9BQU8sSUFIb0JVLFVBQVVHLElBQUksV0FLM0NDLFdBQVcsV0FBQSxPQUFNTCxFQUFRQyxVQUFVQyxPQUFPLGNBQTFDSSxVQUFBLFdBS0EsSUFBTU4sRUFBVWQsU0FBU0ksY0FBYyxZQUR2Q1UsRUFBQUMsVUFBQUMsT0FBQSxZQUtJRixFQUFRTyx3QkFFVlAsT0FBT1QsT0FBQ2dCLE9BQUFBLElBQXVCTixVQUFVRyxJQUFJLFdBRTdDQyxXQUFBLFdBQUEsT0FBQUwsRUFBQUMsVUFBQUMsT0FBQSxjQUdGRyxLQUFBQSxpQkFBVyxRQUFBLFNBQUFHLEdBQUFULFlBQVhVLE9BR0ZDLGNBQUFoQixl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LEVBQUFuQyxNQUFBcUMsRUFBQUYsRUFBQWxDLEtBQUFDLE1BQW1DLENBQUEsSUFBeEJPLEVBQXdCNEIsRUFBQWxDLE1BbEJ0Q21DLEVBQVk3QixHQUFBLEdBQ1RZLEVBQWM5RCxHQUFBQSxJQWxCYSxNQUFBZ0QsR0FBQTRCLEVBQUExRCxFQUFBOEIsR0FBQSxRQUFBNEIsRUFBQTNCLFNBc0JaK0IsT0FBZmhCLEVBQVFpQixVQUNGN0MsRUFBSzhCLFNBQUxYLGNBQVosUUFDWTVDLFVBQVF1RCxJQUFBQSxxQkFFZEQsRUFBRHpELFVBQU0sdUNBRUw0QixFQUFFNEIsY0FBQUEsYUFBQUEsRUFBQUEsR0FFTEssRUFBS2EsVUFBTGIsMk1BR0dqQyxFQUFNcUMsVUFBTixVQUFBSCxFQUFBVyxVQURjRSxFQUFBdkYsU0FBQUksY0FBQSxzQkFBQW1GLEVBQUF2RSxVQUlaaUMsRUFBQUEsU0FBZ0JVLGNBQWhCLFFBQ0FwQixVQUFBQSxJQUFnQixtQkFDakJtQixFQUFBOUMsVUFBQSx1Q0FOYXNELEVBQUFOLGNBQUFDLFlBQUFILE1BcEJsQkosUUFvQmtCLFdBQUFZLEVBQUFDLFVBQUEsRUFPZkQsRUFBTW5ELFVBQUFDLE9BQUEsZUF2RlYiLCJmaWxlIjoic2NyaXB0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5cclxuY29uc3QgdG9nZ2xlQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgndG9nZ2xlLWJ1dHRvbicpWzBdXHJcbmNvbnN0IG5hdmJhckxpbmtzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbmF2YmFyLWxpbmtzJylbMF1cclxuY29uc3QgZm9vdGVyWWVhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb290ZXIteWVhcicpXHJcblxyXG5jb25zdCBzbGlkZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGUnKTtcclxuY29uc3QgbmV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuZXh0Jyk7XHJcbmNvbnN0IHByZXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJldicpO1xyXG5jb25zdCBhdXRvID0gdHJ1ZTsgLy8gQXV0byBzY3JvbGxcclxuY29uc3QgaW50ZXJ2YWxUaW1lID0gNzAwMDtcclxuXHJcbmxldCBzbGlkZUludGVydmFsO1xyXG5cclxuXHJcblxyXG50b2dnbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgbmF2YmFyTGlua3MuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJylcclxufSlcclxuXHJcblxyXG5jb25zdCBoYW5kbGVDdXJyZW50WWVhciA9ICgpID0+IHtcclxuICBjb25zdCB5ZWFyID0gKG5ldyBEYXRlKS5nZXRGdWxsWWVhcigpO1xyXG4gIGZvb3RlclllYXIuaW5uZXJUZXh0ID0geWVhcjtcclxuXHJcbn1cclxuaGFuZGxlQ3VycmVudFllYXIoKVxyXG5cclxuXHJcbmNvbnN0IG5leHRTbGlkZSA9ICgpID0+IHtcclxuICAvLyBHZXQgY3VycmVudCBjbGFzc1xyXG4gIGNvbnN0IGN1cnJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3VycmVudCcpO1xyXG4gIC8vIFJlbW92ZSBjdXJyZW50IGNsYXNzXHJcbiAgY3VycmVudC5jbGFzc0xpc3QucmVtb3ZlKCdjdXJyZW50Jyk7XHJcbiAgLy8gQ2hlY2sgZm9yIG5leHQgc2xpZGVcclxuICBpZiAoY3VycmVudC5uZXh0RWxlbWVudFNpYmxpbmcpIHtcclxuICAgIC8vIEFkZCBjdXJyZW50IHRvIG5leHQgc2libGluZ1xyXG4gICAgY3VycmVudC5uZXh0RWxlbWVudFNpYmxpbmcuY2xhc3NMaXN0LmFkZCgnY3VycmVudCcpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICAvLyBBZGQgY3VycmVudCB0byBzdGFydFxyXG4gICAgc2xpZGVzWzBdLmNsYXNzTGlzdC5hZGQoJ2N1cnJlbnQnKTtcclxuICB9XHJcbiAgc2V0VGltZW91dCgoKSA9PiBjdXJyZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2N1cnJlbnQnKSk7XHJcbn07XHJcblxyXG5jb25zdCBwcmV2U2xpZGUgPSAoKSA9PiB7XHJcbiAgLy8gR2V0IGN1cnJlbnQgY2xhc3NcclxuICBjb25zdCBjdXJyZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmN1cnJlbnQnKTtcclxuICAvLyBSZW1vdmUgY3VycmVudCBjbGFzc1xyXG4gIGN1cnJlbnQuY2xhc3NMaXN0LnJlbW92ZSgnY3VycmVudCcpO1xyXG4gIC8vIENoZWNrIGZvciBwcmV2IHNsaWRlXHJcbiAgaWYgKGN1cnJlbnQucHJldmlvdXNFbGVtZW50U2libGluZykge1xyXG4gICAgLy8gQWRkIGN1cnJlbnQgdG8gcHJldiBzaWJsaW5nXHJcbiAgICBjdXJyZW50LnByZXZpb3VzRWxlbWVudFNpYmxpbmcuY2xhc3NMaXN0LmFkZCgnY3VycmVudCcpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICAvLyBBZGQgY3VycmVudCB0byBsYXN0XHJcbiAgICBzbGlkZXNbc2xpZGVzLmxlbmd0aCAtIDFdLmNsYXNzTGlzdC5hZGQoJ2N1cnJlbnQnKTtcclxuICB9XHJcbiAgc2V0VGltZW91dCgoKSA9PiBjdXJyZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2N1cnJlbnQnKSk7XHJcbn07XHJcblxyXG4vLyBCdXR0b24gZXZlbnRzXHJcbm5leHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcclxuICBuZXh0U2xpZGUoKTtcclxuICBpZiAoYXV0bykge1xyXG4gICAgY2xlYXJJbnRlcnZhbChzbGlkZUludGVydmFsKTtcclxuICAgIHNsaWRlSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChuZXh0U2xpZGUsIGludGVydmFsVGltZSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbnByZXYuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcclxuICBwcmV2U2xpZGUoKTtcclxuICBpZiAoYXV0bykge1xyXG4gICAgY2xlYXJJbnRlcnZhbChzbGlkZUludGVydmFsKTtcclxuICAgIHNsaWRlSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChuZXh0U2xpZGUsIGludGVydmFsVGltZSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vIEF1dG8gc2xpZGVcclxuaWYgKGF1dG8pIHtcclxuICAvLyBSdW4gbmV4dCBzbGlkZSBhdCBpbnRlcnZhbCB0aW1lXHJcbiAgc2xpZGVJbnRlcnZhbCA9IHNldEludGVydmFsKG5leHRTbGlkZSwgaW50ZXJ2YWxUaW1lKTtcclxufVxyXG5cclxuXHJcbnZhciBjb2xjID0gbmV3IENvbGNhZGUoJy5ncmlkJywge1xyXG4gIGNvbHVtbnM6ICcuZ3JpZC1jb2wnLFxyXG4gIGl0ZW1zOiAnLmdyaWQtaXRlbSdcclxufSk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4vLyBzbGlkZXIgYnkgdHJhdmVyc3kgbWVkaWEgXHJcbi8vIGh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9d1dXTnJBTk5PMWsgXHJcblxyXG5cclxuXHJcbntcclxuICBmdW5jdGlvbiByZW1vdmVGaWVsZEVycm9yKGZpZWxkKSB7XHJcbiAgICBjb25zdCBlcnJvclRleHQgPSBmaWVsZC5uZXh0RWxlbWVudFNpYmxpbmc7XHJcbiAgICBpZiAoZXJyb3JUZXh0ICE9PSBudWxsKSB7XHJcbiAgICAgIGlmIChlcnJvclRleHQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZm9ybS1lcnJvci10ZXh0XCIpKSB7XHJcbiAgICAgICAgZXJyb3JUZXh0LnJlbW92ZSgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgZnVuY3Rpb24gY3JlYXRlRmllbGRFcnJvcihmaWVsZCwgdGV4dCkge1xyXG4gICAgcmVtb3ZlRmllbGRFcnJvcihmaWVsZCk7IC8vcHJ6ZWQgc3R3b3J6ZW5pZW0gdXN1d2FtIGJ5IHphd3N6ZSBiecWCIG5ham5vd3N6eSBrb211bmlrYXRcclxuXHJcbiAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgZGl2LmNsYXNzTGlzdC5hZGQoXCJmb3JtLWVycm9yLXRleHRcIik7XHJcbiAgICBkaXYuaW5uZXJUZXh0ID0gdGV4dDtcclxuICAgIGlmIChmaWVsZC5uZXh0RWxlbWVudFNpYmxpbmcgPT09IG51bGwpIHtcclxuICAgICAgZmllbGQucGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZChkaXYpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKCFmaWVsZC5uZXh0RWxlbWVudFNpYmxpbmcuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZm9ybS1lcnJvci10ZXh0XCIpKSB7XHJcbiAgICAgICAgZmllbGQucGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUoZGl2LCBmaWVsZC5uZXh0RWxlbWVudFNpYmxpbmcpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgZnVuY3Rpb24gdG9nZ2xlRXJyb3JGaWVsZChmaWVsZCwgc2hvdykge1xyXG4gICAgY29uc3QgZXJyb3JUZXh0ID0gZmllbGQubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG4gICAgaWYgKGVycm9yVGV4dCAhPT0gbnVsbCkge1xyXG4gICAgICBpZiAoZXJyb3JUZXh0LmNsYXNzTGlzdC5jb250YWlucyhcImZvcm0tZXJyb3ItdGV4dFwiKSkge1xyXG4gICAgICAgIGVycm9yVGV4dC5zdHlsZS5kaXNwbGF5ID0gc2hvdyA/IFwiYmxvY2tcIiA6IFwibm9uZVwiO1xyXG4gICAgICAgIGVycm9yVGV4dC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgc2hvdyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG5cclxuICBmdW5jdGlvbiBtYXJrRmllbGRBc0Vycm9yKGZpZWxkLCBzaG93KSB7XHJcbiAgICBpZiAoc2hvdykge1xyXG4gICAgICBmaWVsZC5jbGFzc0xpc3QuYWRkKFwiZmllbGQtZXJyb3JcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBmaWVsZC5jbGFzc0xpc3QucmVtb3ZlKFwiZmllbGQtZXJyb3JcIik7XHJcbiAgICAgIHRvZ2dsZUVycm9yRmllbGQoZmllbGQsIGZhbHNlKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjb250YWN0Rm9ybVwiKTtcclxuICBjb25zdCBpbnB1dHMgPSBmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbcmVxdWlyZWRdXCIpO1xyXG5cclxuICAvL3d5xYLEhWN6YW15IGRvbXnFm2xuxIUgd2FsaWRhY2rEmVxyXG4gIGZvcm0uc2V0QXR0cmlidXRlKFwibm92YWxpZGF0ZVwiLCB0cnVlKTtcclxuXHJcbiAgZm9yIChjb25zdCBlbCBvZiBpbnB1dHMpIHtcclxuICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBlID0+IG1hcmtGaWVsZEFzRXJyb3IoZS50YXJnZXQsICFlLnRhcmdldC5jaGVja1ZhbGlkaXR5KCkpKTtcclxuICB9XHJcblxyXG4gIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBlID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICBsZXQgZm9ybUVycm9ycyA9IGZhbHNlO1xyXG5cclxuICAgIC8vMiBldGFwIC0gc3ByYXdkemFteSBwb3N6Y3plZ8OzbG5lIHBvbGEgZ2R5IGt0b8WbIGNoY2Ugd3lzxYJhxIcgZm9ybXVsYXJ6XHJcbiAgICBmb3IgKGNvbnN0IGVsIG9mIGlucHV0cykge1xyXG4gICAgICByZW1vdmVGaWVsZEVycm9yKGVsKTtcclxuICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZShcImZpZWxkLWVycm9yXCIpO1xyXG5cclxuICAgICAgaWYgKCFlbC5jaGVja1ZhbGlkaXR5KCkpIHtcclxuICAgICAgICBjcmVhdGVGaWVsZEVycm9yKGVsLCBlbC5kYXRhc2V0LmVycm9yVGV4dCk7XHJcbiAgICAgICAgZWwuY2xhc3NMaXN0LmFkZChcImZpZWxkLWVycm9yXCIpO1xyXG4gICAgICAgIGZvcm1IYXNFcnJvcnMgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFmb3JtRXJyb3JzKSB7XHJcbiAgICAgIGNvbnN0IHN1Ym1pdCA9IGZvcm0ucXVlcnlTZWxlY3RvcihcIlt0eXBlPXN1Ym1pdF1cIik7XHJcbiAgICAgIHN1Ym1pdC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgIHN1Ym1pdC5jbGFzc0xpc3QuYWRkKFwibG9hZGluZ1wiKTtcclxuXHJcbiAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGZvcm0pO1xyXG4gICAgICBjb25zdCB1cmwgPSBmb3JtLmdldEF0dHJpYnV0ZShcImFjdGlvblwiKTtcclxuICAgICAgY29uc3QgbWV0aG9kID0gZm9ybS5nZXRBdHRyaWJ1dGUoXCJtZXRob2RcIik7XHJcblxyXG4gICAgICBmZXRjaCh1cmwsIHtcclxuICAgICAgICBtZXRob2Q6IG1ldGhvZC50b1VwcGVyQ2FzZSgpLFxyXG4gICAgICAgIGJvZHk6IGZvcm1EYXRhXHJcbiAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpXHJcbiAgICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgIGlmIChyZXMuZXJyb3JzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdG9ycyA9IHJlcy5lcnJvcnMubWFwKGVsID0+IGBbbmFtZT1cIiR7ZWx9XCJdYCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkc1dpdGhFcnJvcnMgPSBmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3JzLmpvaW4oXCIsXCIpKTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBlbCBvZiBmaWVsZHNXaXRoRXJyb3JzKSB7XHJcbiAgICAgICAgICAgICAgbWFya0ZpZWxkQXNFcnJvcihlbCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgdG9nZ2xlRXJyb3JGaWVsZChlbCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSBcIm9rXCIpIHtcclxuICAgICAgICAgICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKFwiZm9ybS1zZW5kLXN1Y2Nlc3NcIik7XHJcbiAgICAgICAgICAgICAgZGl2LmlubmVyVGV4dCA9IFwiV3lzxYJhbmllIHdpYWRvbW/Fm2NpIHNpxJkgbmllIHBvd2lvZMWCb1wiO1xyXG5cclxuICAgICAgICAgICAgICBmb3JtLnBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKGRpdiwgZm9ybSk7XHJcbiAgICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9IGBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPldpYWRvbW/Fm8SHIHpvc3RhxYJhIHd5c8WCYW5hPC9zdHJvbmc+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+RHppxJlrdWplbXkgemEga29udGFrdC4gUG9zdGFyYW15IHNpxJkgb2Rwb3dpZWR6aWXEhyBqYWsgbmFqc3p5YmNpZWo8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICBgO1xyXG4gICAgICAgICAgICAgIGZvcm0ucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IFwiZXJyb3JcIikge1xyXG4gICAgICAgICAgICAgIC8vamXFvGVsaSBpc3RuaWVqZSBrb211bmlrYXQgbyBixYLEmWR6aWUgd3lzecWCa2lcclxuICAgICAgICAgICAgICAvL25wLiBnZW5lcm93YW55IHByenkgcG9wcnplZG5pbSB3eXN5xYJhbml1IGZvcm11bGFyemFcclxuICAgICAgICAgICAgICAvL3VzdXdhbXkgZ28sIGJ5IG5pZSBkdXBsaWtvd2HEhyB0eWNoIGtvbXVuaWthdMOzd1xyXG4gICAgICAgICAgICAgIGNvbnN0IHN0YXR1c0Vycm9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtLXNlbmQtZXJyb3JcIik7XHJcbiAgICAgICAgICAgICAgaWYgKHN0YXR1c0Vycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBzdGF0dXNFcnJvci5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgICAgZGl2LmNsYXNzTGlzdC5hZGQoXCJmb3JtLXNlbmQtZXJyb3JcIik7XHJcbiAgICAgICAgICAgICAgZGl2LmlubmVyVGV4dCA9IFwiV3lzxYJhbmllIHdpYWRvbW/Fm2NpIHNpxJkgbmllIHBvd2lvZMWCb1wiO1xyXG4gICAgICAgICAgICAgIHN1Ym1pdC5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKGRpdik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9KS5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgIHN1Ym1pdC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgc3VibWl0LmNsYXNzTGlzdC5yZW1vdmUoXCJsb2FkaW5nXCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59Il19
